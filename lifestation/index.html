<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
        <!-- Fontawesome CSS -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">

        <link rel="stylesheet" href="./assets/animate.min.css">
        <link rel="stylesheet" href="./assets/inputmask.min.css">


        <!--Custom CSS-->
        <link rel="stylesheet" href="styles.css">

        <title>BRAND - Offer</title>
    </head>
    <body>
        <nav class="navbar navbar-expand-sm navbar-light bg-light">
            <div class="container">
                <a class="navbar-brand" href="#"><img src="assets/medical-guardian-logo.png" alt="Medical Guardian"></a>

                    <div class="phone">
                        <div class="d-flex flex-wrap">
                            <div class="phone-content">
                                <a href="tel:8004871803">
                                <label>Call Now for Special Offer:</label>
                                <span id="phone"><i class="fas fa-phone" aria-hidden="true"></i><span class="sr-only">Phone:</span> 800-487-1803</span></a>
                            </div>
                        </div>
                    </div>
            </div><!--/.container-->
        </nav>
        <section id="header">
            <div class="container">
                <h1>96% of older adults want to stay <br class="d-none d-sm-block">in their own home.</h1>
                <h2>— Secure your independence with Medical Guardian. —</h2>
            </div>
        </section>

        <main>
            <div class="">
                <div class="row no-gutters justify-content-md-center align-items-center">
                    <div class="col-md-12">
                        <div class="card-banner">Get Your FREE Personalized Quote</div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row no-gutters justify-content-md-center">
                    <!--<div class="col-md-12">
                        <div class="card-banner">Get Your FREE Personalized Quote</div>
                    </div>-->
                    <div class="col-md-4 col-lg-3 order-2 order-md-1 align-self-center">
                        <div class="card" id="card-left">
                            <div class="card-body">
                                Call Today and Receive:
                                <ul class="list-unstyled checklist">
                                    <li>Pricing as low as <strong>$19.95/month</strong></li>
                                    <li><strong>Free</strong> Equipment + Shipping + Activation</li>
                                    <li>30 day money back guarantee on all systems!</li>
                                </ul>
                            </div><!--/.card-body-->
                        </div><!--/.card-->
                        <div class="floating-badges">
                            <img src="./assets/bbb-aplus.png" alt="BBB Accredited Business A+">
                        </div>
                    </div>
                    <div class="col-md-4 col-lg-4 order-1 order-md-1 align-self-start">

                        <div class="card" id="card-main">
                            <div class="card-body">
                                <div class="quote-wizard">
                                    <form action="https://www.medicalguardian.com/web/index.php/forms/submitLeads" method="post" accept-charset="utf-8" name="form-get-quote" id="form-get-quote">
                                        <input type="hidden" value="" id="q1" name="q1">
                                        <input type="hidden" value="" id="q2" name="q2">
                                        <input type="hidden" value="" id="q3" name="q3">

                                        <div class="step active" id="step1" style="display: block;">
                                            <div class="step-nav">
                                                <span class="nav-dot active"></span>
                                                <span class="nav-dot"></span>
                                                <span class="nav-dot"></span>
                                                <span class="nav-dot"></span>
                                            </div><!--/.step-nav-->

                                            <hr class="text-divider">

                                            <p class="lead text-center step-text">Who are you looking to <span class="nowrap">get protection for?</span></p>

                                            <hr class="text-divider">
                                            <div class="form-group text-center">
                                                <a href="#q1" class="btn btn-lg btn-block thm-btn btn-next" data-answer="Myself" title="Myself">MYSELF</a>
                                            </div><!--/.form-group-->
                                            <div class="form-group text-center m-b-2">
                                                <a href="#q1" class="btn btn-lg btn-block thm-btn btn-next" data-answer="Someone else" title="Someone else">SOMEONE ELSE</a>
                                            </div><!--/.form-group-->
                                        </div><!--/#step1-->

                                        <div class="step" id="step2">
                                            <div class="step-nav">
                                                <span class="nav-dot active"></span>
                                                <span class="nav-dot active"></span>
                                                <span class="nav-dot"></span>
                                                <span class="nav-dot"></span>
                                            </div><!--/.step-nav-->

                                            <hr class="text-divider">

                                            <p class="lead text-center step-text">Do you need protection <span class="nowrap">in-home</span> or <span class="nowrap">on-the-go?</span></p>

                                            <hr class="text-divider">

                                            <div class="form-group">
                                                <a href="#q2" class="btn btn-lg btn-block thm-btn btn-next" data-answer="At Home" title="At Home">IN-HOME</a>
                                            </div><!--/.form-group-->
                                            <div class="form-group">
                                                <a href="#q2" class="btn btn-lg btn-block thm-btn btn-next" data-answer="On-the-go" title="On-the-go">ON-THE-GO</a>
                                            </div><!--/.form-group-->
                                        </div><!--/#step2-->

                                        <div class="step" id="step3">
                                            <div class="step-nav">
                                                <span class="nav-dot active"></span>
                                                <span class="nav-dot active"></span>
                                                <span class="nav-dot active"></span>
                                                <span class="nav-dot"></span>
                                            </div><!--/.step-nav-->

                                            <hr class="text-divider">
                                            <p class="lead text-center step-text">Which are you most <span class="nowrap">interested in?</span></p>
                                            <hr class="text-divider">

                                            <div class="form-group">
                                                <a href="#q3" class="btn btn-lg btn-block thm-btn btn-next" data-answer="Product" title="Product">PRODUCT</a>
                                            </div><!--/.form-group-->
                                            <div class="form-group">
                                                <a href="#q3" class="btn btn-lg btn-block thm-btn btn-next" data-answer="Pricing" title="Pricing">PRICING</a>
                                            </div><!--/.form-group-->
                                        </div><!--/#step2-->

                                        <div class="step" id="step4">
                                            <div style="position:relative;display:block;width: 100%;height:80px;">
                                                <div class="spinner"></div>
                                            </div>

                                            <p class="lead text-center step-text">Gathering Responses</p>

                                            <ul class="list-unstyled checklist">
                                                <li>Protection Type: <strong><span id="q1-text"></span></strong></li>
                                                <li>Protection Range: <strong><span id="q2-text"></span></strong></li>
                                                <li>Interested In: <strong><span id="q3-text"></span></strong></li>
                                            </ul>
                                            <a href="#q4" class="btn btn-lg btn-block thm-btn btn-next" style="display:none;">PRICING</a>
                                        </div><!--/#step4-->

                                        <div class="step" id="step5">
                                            <div id="lead-form">
                                                <div class="step-nav">
                                                    <span class="nav-dot active"></span>
                                                    <span class="nav-dot active"></span>
                                                    <span class="nav-dot active"></span>
                                                    <span class="nav-dot active"></span>
                                                </div><!--/.step-nav-->

                                                <p class="lead text-center step-text step-subtitle">Almost Done</p>
                                                <p class="text-center">Just give us a few more details to complete your FREE personalized quote!</p>

                                                <ul id="formErrors"></ul>

                                                <fieldset>
                                                    <div class="form-group clearfix">
                                                        <label for="Name" class="sr-only">Name</label>
                                                        <input type="text" class="form-control name-input" id="Name" name="Name" placeholder="Your Full Name">
                                                    </div>
                                                    <div class="form-group clearfix">
                                                        <label for="Email" class="sr-only">Email</label>
                                                        <input type="email" class="form-control" id="Email" name="Email" placeholder="Your Email Address">
                                                    </div>
                                                    <div class="form-group clearfix">
                                                        <label for="Phone" class="sr-only">Phone</label>
                                                        <input type="tel" class="form-control phone-input" id="Phone" name="Phone" placeholder="Your Phone Number">
                                                    </div>
                                                    <div class="form-group clearfix">
                                                        <a class="btn btn-lg btn-block thm-btn submit-form" id="SubmitInfo" role="button" href="https://www.medicalguardian.com/offer#form-get-quote">GET FREE QUOTE <span class="icon-play_arrow icon"></span></a>
                                                    </div>
                                                    <div class="text-center" style="text-align:center;">
                                                        <img style="margin: 5px auto;" src="./assets/norton-badge.jpg">
                                                    </div>
                                                </fieldset>

                                                <p class="disclaimer">By submitting, you authorize Lifestation to email you, or call you on the mobile or landline phone number provided. You understand that some may use automated phone technology, including text messaging to contact you and that you are in no way required to purchase any products or services from us. It’s entirely your choice.</p>
                                            </div><!--/#lead-form-->

                                            <div id="lead-form-spinner" style="display:none;margin-top:20px;">
                                                <div style="position:relative;display:block;width:100%;height:80px;">
                                                    <div class="spinner"></div>
                                                </div>
                                                <p class="lead text-center step-text">sending request</p>
                                            </div>

                                            <div id="lead-form-success" style="display:none;margin-top:20px;">
                                                <p class="lead text-center step-text">Call to continue with your FREE quote</p>
                                                <div class="text-center">
                                                    <span class="icon-arrow_downward lg-disc" style="display:inline-block; height:60px;width:60px;text-align:center;color:#fff;background:#d82c3b;border-radius:50%;overflow:hidden;font-size:48px;line-height:60px;margin:-8px auto 14px;"></span>
                                                </div>
                                                <a href="https://www.medicalguardian.com/offer#" class="btn btn-lg btn-block thm-btn no-call" rel="button"><span class="icon-phone3 icon"></span> 800-487-1803</a>
                                                <div class="text-center"><small style="display:block;padding:14px 0;">- or -</small>
                                                    <a href="https://www.medicalguardian.com/products" class="btn btn-default" rel="button">Shop Now</a>
                                                </div>
                                            </div><!--/#lead-form-success-->

                                        </div><!--/#step5-->
                                    </form>
                                </div><!--/.quote-wizard-->

                            </div><!--/.card-body-->
                        </div><!--/.card-->
                    </div>
                    <div class="col-md-4 col-lg-3 order-3 order-md-1 align-self-center">
                        <div class="card" id="card-right">
                            <div class="card-body">
                                <p class="text-center" style="margin: 0 0 18px 0; font-size: 11px; line-height:11px; letter-spacing: 0.04em; font-weight: 400; color: #666;">- PRODUCTS OFFERED -</p>

                                <div id="carouselExampleControls" class="carousel slide" data-ride="carousel" data-interval="false">
                                    <div class="carousel-inner">
                                        <div class="carousel-item active">
                                            <img src="assets/nav-freedom.png" alt="Medical Guardian Freedom Device">
                                            <p class="h5">Freedom</p>
                                            <ul class="list-unstyled checklist">
                                                <li>Messaging &amp; Alerts</li>
                                                <li>3-Day Weather Forecast</li>
                                                <li>Calendar Reminders</li>
                                            </ul>
                                        </div><!--/.carousel-item-->
                                        <div class="carousel-item">
                                            <img src="assets/nav-ag.png" alt="Medical Guardian Active Device">
                                            <p class="h5">Active</p>
                                            <ul class="list-unstyled checklist">
                                                <li>GPS & WiFi Location</li>
                                                <li>3-5 Day Battery Life</li>
                                                <li>Fall Detection Optional</li>
                                            </ul>
                                        </div><!--/.carousel-item-->
                                        <div class="carousel-item">
                                            <img src="assets/nav-mg.png" alt="Medical Guardian Mobile Device">
                                            <p class="h5">Mobile</p>
                                            <ul class="list-unstyled checklist">
                                                <li>GPS Location</li>
                                                <li>24 Hour Battery Life</li>
                                                <li>Home/On-Go Protection</li>
                                            </ul>
                                        </div><!--/.carousel-item-->
                                        <div class="carousel-item">
                                            <img src="assets/nav-fg.png" alt="Medical Guardian Family Device">
                                            <p class="h5">Family</p>
                                            <ul class="list-unstyled checklist">
                                                <li>Activity Monitoring App</li>
                                                <li>32 Hour Battery Backup</li>
                                                <li>Movement Tracking Sensors</li>
                                            </ul>
                                        </div><!--/.carousel-item-->
                                        <div class="carousel-item">
                                            <img src="assets/nav-cg.png" alt="Medical Guardian Classic Device">
                                            <p class="h5">Classic</p>
                                            <ul class="list-unstyled checklist">
                                                <li>Landline Required</li>
                                                <li>1,300 ft. Protection</li>
                                                <li>32 Hour Backup Battery</li>
                                            </ul>
                                        </div><!--/.carousel-item-->
                                        <div class="carousel-item">
                                            <img src="assets/nav-hg.png" alt="Medical Guardian Home Device">
                                            <p class="h5">Home</p>
                                            <ul class="list-unstyled checklist">
                                                <li>Cellular Based</li>
                                                <li>Fall Detection Optional</li>
                                                <li>30 Hour Battery Backup</li>
                                            </ul>
                                        </div><!--/.carousel-item-->
                                    </div><!--/.carousel-inner-->
                                    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                        <span class="sr-only">Previous</span>
                                    </a>
                                    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                        <span class="sr-only">Next</span>
                                    </a>
                                </div><!--/.carousel-->
                            </div><!--/.card-body-->
                        </div><!--/.card-->
                        <div class="floating-badges">
                            <img src="./assets/us-logo-inverse.png" alt="USA Flag - 100% U.S. Based Monitoring Center">
                        </div>

                    </div>
                </div><!--/.row-->
            </div><!--/.container-->
        </main>

        <footer>
            <div id="footer-cta">
                    <div class="row no-gutters justify-content-sm-center">
                        <div class="col-sm-12">
                            Call TODAY:

                            <a class="phone" href="tel:8006689200"><i class="fas fa-phone" aria-hidden="true"></i><span class="sr-only">Phone:</span> 800-668-9200</a>
                        </div>
                    </div>
            </div><!--/#footer-cta-->

            <div id="disclaimer">
                <div class="container">
                    <ul class="list-unstyled text-left" style="font-family:sans-serif;font-size:10px;line-height: 1.2;">
                    <li><span>**</span>* One free month of service offer applies to Annual subscriptions only.</li>
                    <li><span>*</span>** Free shipping available only on select Medical Guardian subscription packages. Please ask your Life Safety Consultant for more information.</li>
                    <li><span>*</span>† By submitting your information to request a free quote, you consent for Medical Guardian to use automated technology including pre-recorded messages to contact you at the number provided. This number is not required to make a purchase from us.</li>
                    </ul>
                </div><!--/.container-->
            </div><!--/#disclaimer-->
        </footer>


        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="./assets/jquery-3.2.1.min.js"></script>

        <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>-->
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.touchswipe/1.6.19/jquery.touchSwipe.js"></script>

        <script src="assets/jquery.validate-1.17.min.js"></script>
        <script src="assets/jquery.maskedinput.min.js"></script>
        <script type="text/javascript" src="assets/jquery.mask.min.js"></script>
        <script type="text/javascript" src="assets/input-mask-init.js"></script>
        <script src="assets/progressbar.min.js"></script>
        <script src="assets/jquery.cookie.js"></script>
        <script src="assets/lodash.min.js"></script>
        <script src="assets/jquery.countdown.min.js"></script>

        <script type="text/javascript" src="assets/wow.min.js"></script>
        <script type="text/javascript" src="assets/owl.carousel.min.js"></script>


        <script type="text/javascript">
            /*codepen: Andrea Rufo
            dependencies:
            //cdnjs.cloudflare.com/ajax/libs/jquery.touchswipe/1.6.19/jquery.touchSwipe.js
            //stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js
            */
            $(".carousel").swipe({
                swipe: function(event, direction, distance, duration, fingerCount, fingerData) {
                if (direction == 'left') $(this).carousel('next');
                if (direction == 'right') $(this).carousel('prev');
              },
              allowPageScroll:"vertical"
            });
        </script>
        <script>
            $(function() {

              function appCarousel(){
                  var app_carousel = $(".products-slider");
                  if(app_carousel.length){
                    app_carousel.owlCarousel({
                      stagePadding: 0,
                      loop:true,
                      margin:0,
                      autoplay:false,
                      nav:true,
                      navElement: 'a',
                      navText: ['<span class="fa fa-chevron-left fa-lg"></span>','<span class="fa fa-chevron-right fa-lg"></span>'],
                      smartSpeed:800,
                      responsive:{
                          0:{
                              items:1
                          },
                          600:{
                              items:1
                          },
                          1000:{
                              items:1
                          }
                      }
                    });
                  }
              }
              appCarousel();


              $('.no-call').click(function(e) {
                  e.preventDefault();
              });

              /*var wBanner = $('.banner .h3 span').outerWidth() + 'px';
              $('.banner .h3 span').css('width',wBanner);*/

              $("input[name=Phone]").focus(function() {
                  $(this).mask("(999) 999-9999");
              });

              // fade in first question
              $('#form-get-quote .step.active').show();

              $('#form-get-quote .step .btn-next').click(function(e) {
                  e.preventDefault();

                  // assign answer value to global variable
                  var question = $(this).attr("href");
                  var answer = $(this).attr("data-answer");
                  //var answer = $(this).attr("title");
                  var qNext;
                  var qNextLabel;
                  var timer;

                  var qIndex = $('#form-get-quote > .active').index();

                  $('#form-get-quote > .active').hide().removeClass('active');

                  $(question).val(answer);
                  //console.log($(question).val());

                  switch (question) {
                      case '#q1':
                          qNext = '#step2';
                          qNextLabel = 'Step 2';
                          trackStepComplete('Step 1', answer);
                          break;
                      case '#q2':
                          qNext = '#step3';
                          qNextLabel = 'Step 3';
                          trackStepComplete('Step 2', answer);
                          break;
                      case '#q3':
                          qNext = '#step4';
                          qNextLabel = 'Step 4';
                          trackStepComplete('Step 3', answer);

                          $('#q1-text').text($('#q1').val());
                          $('#q2-text').text($('#q2').val());
                          $('#q3-text').text($('#q3').val());

                          setTimeout(function(){
                            $('#step4 .btn-next').click();
                          }, 2500);
                          break;
                      case '#q4':
                          qNext = '#step5';
                          qNextLabel = 'Step 5';
                          break;
                  }

                  $(qNext).addClass('active').fadeIn(300);

                  if (qNext != '#step4' || qNext != '#step5') {
                      trackStepStart(qNextLabel);
                  }

                  if (qNext === '#step5') {
                      (window.dataLayer = window.dataLayer || []).push({
                          'event': 'customForm',
                          'formName': 'offer',
                          'formAction': 'view'
                      });
                      $('.right-panel-products').fadeOut(250, function(){
                        $('.right-panel-offer').fadeIn(250);
                      });
                  }

                });


                // ---------- SUBMIT HELP-ME-CHOOSE FORM -------------

                $('.submit-form').click(function(e) {
                    e.preventDefault();

                  var myForm = $(this).attr('href');

                  var validator = $( myForm ).validate({
                    rules: {
                      // simple rule, converted to {required:true}
                      Name: {
                        required: true,
                        minlength: 5
                      },
                      Phone: {
                        required: true,
                        minlength: 10
                      },
                      // compound rule
                      Email: {
                        required: true,
                        email: true
                      }
                    },
                    messages: {
                      Name: {
                        required: "Full name is required",
                        minlength: "Enter your full name"
                      },
                      Phone: {
                        required: "Phone number is required",
                        minlength: "Invalid phone number"
                      },
                      Email: {
                        required: "Email address is required",
                        email: "Invalid email address"
                      }
                    }
                  });
                  if (validator.form()){
                    var form, wrapper;
                    var spinner, dlName;

                    switch(myForm) {
                        case '#form-get-quote':
                            form = '#form-get-quote';
                            wrapper = '#lead-form';
                            spinner = '#lead-form-spinner';
                            dlName = 'offer';
                            break;
                        case '#popForm':
                            form = '#popForm';
                            wrapper = '#popForm';
                            spinner = '#spinner2';
                            dlName = 'offer side';
                            break;
                        case '#form-side-lead':
                            form = '#form-side-lead';
                            wrapper = '#form-side-lead';
                            spinner = '#spinner3';
                            dlName = 'offer widget';
                            break;
                        default:
                            break;
                    }

                    $(wrapper).hide();
                    $(spinner).fadeIn();

                    //var form = '#form-get-quote';

                    $("#formErrors").hide().empty();

                    // GTM
                    (window.dataLayer=window.dataLayer||[]).push({
                     'event' : 'customForm',
                     'formName' : dlName,
                     'formAction' : 'submit attempt'
                     });

                    // GET FORM VARS AND POST AJAX
                    var obj = $(form);
                    var url = obj.attr('action');
                    var method = obj.attr('method');

                    var data = $(form).serialize();
                    // append form responses
                    data += "&aid=2018&form_type=freequote";
                    //console.log(data);

                    //setTimeout(function(){
                      $.ajax({
                          url: url,
                          type: method,
                          dataType: 'json',
                          data: data,
                          //async: false,
                          success: function(response) {
                              if(!response.success) {
                                $(spinner).hide();
                                $(wrapper).fadeIn(200);

                                var error = '';
                                $.each(response, function(key, value) {
                                    $("#" + key).addClass('err');
                                    //error = error + '<li class="error_text">' + value + '</li>'
                                    value = value.replace("The ", "");
                                    value = value.replace("field ", "");
                                    $("#formErrors").append('<li class="error_text">' + value + '</li>')
                                });
                                //$("#formErrors").html(error).show();
                                $("#formErrors").show();
                                $( "input.err" ).first().focus();

                              } else {
                                (window.dataLayer=window.dataLayer||[]).push({
                                  'event' : 'customForm',
                                  'formName' : dlName,
                                  'formAction' : 'submit success'
                                });

                                data['insermsg'] = response.insertmsg;
                                data['badData']  = response.badData;
                                data['insert_data'] = response.insert_data;
                                ajaxCallSalesforceProcess(data);

                                window.location.replace("https://www.medicalguardian.com/offer/thankyou");
                                //window.open('https://www.medicalguardian.com./assets/Medical-Guardian-Product-Brochure.pdf', '_blank');
                              }
                          }
                       });
                     //}, 1000);
                  }
                });

                function trackStepStart(whichStep) {
                    (window.dataLayer = window.dataLayer || []).push({
                        'event': 'customProcess',
                        'processName': 'offer',
                        'processStep': whichStep, //*required (string)
                        'processAction': 'start'
                    });
                }

                function trackStepComplete(step, answer) {
                    (window.dataLayer = window.dataLayer || []).push({
                        'event': 'customProcess',
                        'processName': 'offer',
                        'processStep': step, //*required (string)
                        'processAction': 'complete',
                        'processAnswer': answer //*required (string)
                    });
                }

                function ajaxCallSalesforceProcess(data){
                    var url = "https://www.medicalguardian.com/forms/salesforceCall";
                    //var url = "https://mg.oclocksupport.com/forms/salesforceCall";
                    $.ajax({
                        url: url,
                        data: data,
                        type: 'post',
                        dataType: 'json',
                        success: function(response) {
                            //$("#form_submit_modal").modal('hide');
                            console.log(response);
                            if (response.success) {

                            } else {
                                console.log("There were some validation errors");
                            }

                        },
                        error: function(xhr, status, error) {
                            console.log("There was an ajax error");

                        }
                    });

                }

                if (Cookies.get('mgOfferExpires') === undefined){
                  var date = new Date();
                  Cookies.set('mgOfferExpires', date.toString(), { expires: 1, path: '/' });
                  console.log('cookie created');
                } else {
                  console.log(Cookies.get('mgOfferExpires'));
                }
                //var d = new Date();
                var d = new Date(Cookies.get('mgOfferExpires'));
                d.setMinutes(d.getMinutes() + 30);
                //alert(deadline);
                var yr = d.getFullYear()+1;
                var mo = d.getMonth();
                var dy = d.getDate();
                var h = d.getHours();
                var m = d.getMinutes();
                var s = d.getSeconds();

                console.log($.now(Cookies.get('mgOfferExpires')));
                var cDate = new Date();
                var cHour = cDate.getHours();
                //console.log(cHour);
                //console.log(h);

                if ((cHour >= 8) && (cHour < 22)){ /* -- DISPLAY BETWEEN 8am and 10pm -- */

                  //var deadline = yr +'/'+ mo +'/'+ dy +' '+ h +':'+ m  +':'+ s;
                  //deadline = '2020/10/10 19:34:56';
                  /*$("#launch-countdown")
                  .countdown(deadline, function(event) {
                    $(this).text(
                      event.strftime('%W weeks %-d days %-H h %M min %S sec')
                    );
                  });*/

                  var deadline = yr +'/'+ mo +'/'+ dy +' '+ h +':'+ m +':'+ s;

                  var labels = ['week', 'days', 'hrs', 'mins', 'secs'],
                    nextYear = deadline,
                    template = _.template($('#main-example-template').html()),
                    currDate = '00:00:00:00:00',
                    nextDate = '00:00:00:00:00',
                    parser = /([0-9]{2})/gi,
                    $example = $('#main-example');
                  // Parse countdown string to an object
                  function strfobj(str) {
                    var parsed = str.match(parser),
                      obj = {};
                    labels.forEach(function(label, i) {
                      obj[label] = parsed[i]
                    });
                    return obj;
                  }
                  // Return the time components that diffs
                  function diff(obj1, obj2) {
                    var diff = [];
                    labels.forEach(function(key) {
                      if (obj1[key] !== obj2[key]) {
                        diff.push(key);
                      }
                    });
                    return diff;
                  }
                  // Build the layout
                  var initData = strfobj(currDate);
                  labels.forEach(function(label, i) {
                    $example.append(template({
                      curr: initData[label],
                      next: initData[label],
                      label: label
                    }));
                  });
                  // Starts the countdown
                  $example.countdown(nextYear, function(event) {
                    var newDate = event.strftime('%w:%d:%H:%M:%S'),
                      data;
                    if (newDate !== nextDate) {
                      currDate = nextDate;
                      nextDate = newDate;
                      // Setup the data
                      data = {
                        'curr': strfobj(currDate),
                        'next': strfobj(nextDate)
                      };
                      // Apply the new values to each node that changed
                      diff(data.curr, data.next).forEach(function(label) {
                        var selector = '.%s'.replace(/%s/, label),
                            $node = $example.find(selector);
                        // Update the node
                        $node.removeClass('flip');
                        $node.find('.curr').text(data.curr[label]);
                        $node.find('.next').text(data.next[label]);
                        // Wait for a repaint to then flip
                        _.delay(function($node) {
                          $node.addClass('flip');
                        }, 50, $node);
                      });
                    }
                  });

                } else {
                  $('#nav-countdown').html('<p style="max-width: 350px; padding-left: 40px; padding-top: 8px; text-align: center;">Offer has expired! Please check back at 8 A.M. EST for updated offer.</p>');
                } /* -- END IF -- */

            });
        </script>

        <script>
            var questions_list;
            var curr_question = "0";
            var answers = Array();
            var risk_score = 0;
            var lead_id = '';
            var q_count = 0;
            var total_q = 7;
            var total_low = 6;
            var total_high = 9;
            var total_current = total_low;

            $(function(){

              //questions_list = $.parseJSON(strJSON);
              //console.log(questions_list);

              $('.ra-step').eq(0).addClass('current');

              //setTimeout(function(){ $('.ra-widget-open').removeClass('ra-widget-open'); }, 2500);

              $('#ra-widget .side-tab').click(function(e) {
                  e.preventDefault();
                  if ($('#ra-widget').hasClass('ra-widget-open') == true){
                    closeRA()
                  } else {
                    $('body').prepend('<div class="ra-overlay" id="ra-overlay"></div>');
                    $('.ra-overlay').fadeIn(500);
                    $('#ra-widget').addClass('ra-widget-open');

                    // Get the modal
                    var modal = document.getElementById('ra-overlay');
                    // When the user clicks anywhere outside of the modal, close it
                    $('#ra-overlay').click(function(event) {
                      closeRA();
                    });
                  }
              });
              $('#ra-widget .close').click(function(e) {
                  e.preventDefault();
                  closeRA();
              });

              function closeRA() {
                $('.ra-overlay').fadeOut(500, function(){
                  $('.ra-overlay').remove();
                });
                $('#ra-widget').removeClass('ra-widget-open');
              }
            /*
              $(document).click(function() {
                if ($('#ra-widget').hasClass('ra-widget-open') == true){
                  console.log('hi');
                }
              });
            */

              $('.ra-steps .current .custom-single-select, .ra-steps .current .custom-multiple-select').each(function(){
                $(this).addClass('animated fadeInRight');
              });

              $(".ra-steps input[type='radio'], .ra-steps input[type='checkbox']").change(function(){
                $('.btn-ra-step-next').click();
              });

              //$(".steps .current > div").css('opacity','1');
              //$('.btn-step-back').hide();

              //$("#raPhone").focus(function() {
              //    $(this).inputmask({ "mask": "(999) 999-9999","autoUnmask": true });
              //});

              $("input[name=Phone]").focus(function() {
                  $(this).mask("(999) 999-9999");
              });

              // extra phone filters
                $(".phone-input").keyup(function() {
                    expr1 = ($(this).val()[6] == 5);
                    expr2 = ($(this).val()[7] == 5);
                    expr3 = ($(this).val()[8] == 5);

                    if (expr1 && expr2 && expr3) $(this).val('');

                    if ($(this).val().length == 11) {
                        expr1 = $(this).val() == '(555) 121-2';
                        if (expr1) $(this).val('');
                    }

                    if ($(this).val().length == 14) {
                        expr1 = $(this).val().match(/^\(0/g);
                        expr2 = $(this).val().match(/^\(1/g);
                        expr3 = $(this).val().match(/^\(555/g);
                        expr4 = $(this).val() == '(987) 654-3210';
                        if (expr1 || expr2 || expr3 || expr4) $(this).val('');
                    }

                    if ($(this).val().length == 14 && ($(this).val()[1] == $(this).val()[2])) {
                        expr1 = (new Set($(this).val().replace(/(\(|\)|-|\s)/g, '')).size == 1);
                        if (expr1) $(this).val('');
                    }
                });

                $("input[name='Name']").mask('Z', {translation: {'Z': {pattern: /[a-zA-Z ]/, recursive: true}}});

                $(".name-input").mask('Z', {translation: {'Z': {pattern: /[a-zA-Z ]/, recursive: true}}});

              //$('.form-group [data-toggle="tooltip"]').tooltip({ container: 'body' });
              //$('.form-group [data-toggle="tooltip"]').tooltip('show');

              $('.btn-ra-step-next').click(function(event){
                event.preventDefault();

                var stepCurrent = Number($('.ra-steps .current').data('step'));

                if ( $(".ra-steps .current input:checked").length > 0 ) {
                //if ( stepCurrent < 9 ) {
                  var stepNext = stepCurrent + 1;
                  var stepQuestion;
                  var stepAnswer;
                  var score;

                  // skip to Features if no fall
                  if (stepCurrent === 5 ){
                    var radioValue = $(".ra-steps .current input[type='radio']:checked").val();
                    radioValue === 'No' ? stepNext = 9 : null;
                  }

                  if ( $(".ra-steps .current").hasClass('question') ) {
                    risk_score += parseInt($(".ra-steps .current input[type='radio']:checked").data('score'));
                    $('#riskID').text(risk_score);

                    stepQuestion = $(".ra-steps .current .question-text").text();
                    stepAnswer = $(".ra-steps .current input[type='radio']:checked").val();
                    score = parseInt($(".ra-steps .current input[type='radio']:checked").data('score'));

                    var new_answer = {
                        question: stepQuestion,
                        answer: stepAnswer,
                        score: score
                    }
                    answers.push(new_answer);
                    //console.log(answers);

                    seerProcess('complete', stepQuestion, stepAnswer);
                    seerProcess('start', $('#set-'+ stepNext).find('.question-text').text(), '');
                  }

                  if ( stepCurrent === 9 ) {
                    var features = '';
                    $(".ra-steps .current input[type='checkbox']:checked").each(function(){
                      features += ' '+ $(this).val();
                    });
                    console.log(features);
                    stepQuestion = 'Features';
                    stepAnswer = features;
                    score = 0;

                    var new_answer = {
                        question: stepQuestion,
                        answer: stepAnswer,
                        score: score
                    }
                    answers.push(new_answer);
                    console.log(answers);

                    $('.ra-stepProgressBar').css('width', '100%' );
                    $('.ra-stepProgressBar').text('100%');

                    seerProcess('complete', stepQuestion, stepAnswer);
                    seerProcess('start', $('#set-'+ stepNext).find('.question-text').text(), '');
                  }

                  $('.ra-steps .current .help-text').hide();
                  $('.ra-steps .current').fadeOut(300, function(){

                    // hide pager if loading steps
                    if (stepNext === 10 ) {
                      $('.ra-steps-pager').hide();
                    }

                    $('.ra-steps .current').removeClass('current');
                    $('#set-'+ stepNext).addClass('current').fadeIn(200, function(){
                      $('.ra-steps .current .custom-single-select, .ra-steps .current .custom-multiple-select').each(function(){
                        $(this).addClass('animated fadeInRight');
                        var wPBar = Math.floor((stepCurrent / total_current) * 100) + "%";
                        console.log(wPBar);
                        $('.ra-stepProgressBar').css('width', wPBar );
                        $('.ra-stepProgressBar').text(wPBar);
                      });
                      if ($('.ra-steps .current').hasClass('step-ra-loading')) {
                        showLoading();
                      }
                      if ($('.ra-steps .current').hasClass('step-ra-form') == true) {
                        //$("#Name").focus();
                        console.log('form');
                      }
                    });
                    //$('.btn-step-back:hidden').fadeIn(200);
                  });

                  //var str = $( "#riskForm" ).serialize();
                  //console.log(str);

                } else {
                  $('.ra-steps .current .help-text').fadeIn(200);
                }

              });


              $('#ra-answer-dofinal').click(function(event){
                event.preventDefault();
                validateRiskForm();
              });


              function showLoading(){
                $('#ra-progress').empty().show();
                showProgress();
                setTimeout(function(){
                  $('.ra-steps .step-ra-loading').removeClass('current').fadeOut(200, function(){
                    $('#ra-progress').hide();
                    $('.ra-steps .step-ra-form').addClass('current').fadeIn(200, function(){
                      seerForm('view');
                    });
                  })
                }, 1000);
              }

              function showProgress(){
                var circle = new ProgressBar.Circle('#ra-progress', {
                  color: '#be3867',
                  duration: 1000,
                  easing: 'linear',
                  strokeWidth: 10,
                  trailColor: '#ffffff',
                  trailWidth: 10,
                  svgStyle: {width: '100%', height: '100%'},
                  text: {
                    value: 'collecting',
                    style: {
                      // Text color.
                      // Default: same as stroke color (options.color)
                      color: '#999',
                      position: 'absolute',
                      right: '0',
                      top: '100%',
                      padding: 0,
                      margin: 0,
                      marginTop: '6px',
                      width: '100%',
                      textAlign: 'center',
                      fontSize: '12px',
                      lineHeight: '12px'
                      //transform: 'translateX(35px)',
                      //transition: 'all .15s ease'
                    },
                    autoStyleContainer: true
                  },
                  step: function(state, circle) {
                    var status = Math.round(circle.value() * 100);
                    //if (status > 33 && status < 66) { circle.setText('tabulating'); }
                    if (status >= 51) { circle.setText('calculating'); }
                    //circle.setText(Math.round(circle.value() * 100) + '%');
                  }

                });

                circle.animate(1);
              }

              function showLoader(){
                $('#ra-loader2').empty().show();
                var circle2 = new ProgressBar.Circle('#ra-loader2', {
                  color: '#be3867',
                  duration: 5000,
                  easing: 'linear',
                  strokeWidth: 4,
                  trailColor: '#ffffff',
                  trailWidth: 4,
                  svgStyle: {width: '100%', height: '100%'},
                  text: {
                    value: 'collecting',
                    style: {
                      // Text color.
                      // Default: same as stroke color (options.color)
                      color: '#999',
                      position: 'absolute',
                      right: '0',
                      top: '50%',
                      padding: 0,
                      margin: 0,
                      marginTop: '-16px',
                      width: '100%',
                      textAlign: 'center',
                      fontSize: '16px',
                      lineHeight: '16px'
                      //transform: 'translateX(35px)',
                      //transition: 'all .15s ease'
                    },
                    autoStyleContainer: true
                  },
                  step: function(state, circle2) {
                    var status = Math.round(circle2.value() * 100);
                    if (status > 33 && status < 66) { circle2.setText('sending'); }
                    if (status >= 66) { circle2.setText('receiving'); }
                    //circle.setText(Math.round(circle.value() * 100) + '%');
                  }

                });

                circle2.animate(2);
              }

              function seerProcess(type, step, answer) {
                  var obj = {
                      'event' : 'customProcess',
                      'processName' : 'risk assessment',
                      'processStep' : step, //*required (string)
                      'processAction' : type
                  };
                  if (answer !== '') { obj.processAnswer = answer; }
                  (window.dataLayer=window.dataLayer||[]).push(obj);
              }

              function seerForm(action) {
                  var obj = {
                      'event' : 'customForm',
                      'formName' : 'risk assessment',
                      'formAction' : action
                  };
                  (window.dataLayer=window.dataLayer||[]).push(obj);
              }

              function validateRiskForm() {
                var isValid = true;
                var fullname = $('#riskForm #Name').val();
                var phone = $('#riskForm #Phone').val();
                var email = $('#riskForm #Email').val();

                console.log(phone);

                $(".ra-step.current .required").each(function() {
                  //var str = $(this).val();
                  //$(this).next(".txtError").remove();
                  $(this).next(".errCaption").remove();
                  $(this).removeClass('invalid');
                });

                if ( fullname === '' || fullname === null ){
                  $('#riskForm #Name').addClass('invalid').after( '<span class="errCaption">*</span>' );
                  isValid = false;
                }

                if ( phone === '' || phone === null ){
                  $('#riskForm #Phone').addClass('invalid').after( '<span class="errCaption">*</span>' );
                  isValid = false;
                }

                // regex for email VALIDATION
                var email_regex = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                if ( email === '' || email === null ) {
                  $('#riskForm #Email').addClass('invalid').after( '<span class="errCaption">*</span>' );
                  isValid = false;
                } else if ( email_regex.test(email) === false ) {
                  $('#riskForm #Email').addClass('invalid').after( '<span class="errCaption">*</span>' );
                  isValid = false;
                }

                if ( isValid !== false ) {
                  console.log('valid form');
                  submitLead();
                }

              }

              function submitLead() {

                  // GET FORM VARS AND POST AJAX
                  var obj = $("#riskForm");
                  var url = obj.attr('action');
                  //console.log(url);
                  var method = obj.attr('method');

                  var data = {
                      risk_answers: JSON.stringify(answers),
                      risk_score: risk_score
                  };

                  obj.find('[name]').each(function(index, value) {
                      var input = $(this);
                      var name = input.attr('name');
                      var value = input.val();
                      data[name] = value;
                  });

                  console.log(data);

                  $(".form-control").css("border", "1px solid #ccc");
                  //$('#risk-score-loading').css("display", "block");

                  seerForm('submit attempt');
                  console.log('submit attempt');

                  $('#ra-lead-form').hide();
                  showLoader();

                  $.ajax({
                      url: url,
                      data: data,
                      type: 'post',
                      dataType: 'json',
                      success: function(response) {
                          //$("#form_submit_modal").modal('hide');
                          console.log(response);

                          if (response.success || response.Duplicate) {
                              $('.ra-steps .ra-step.current').removeClass('current').fadeOut(200, function(){
                                if (risk_score < 7){
                                  // on-the-go
                                  $('#set-result-mobile .text-risk-score').text('Your Risk Score is '+ risk_score);
                                  $('#set-result-mobile').fadeIn(200);
                                } else {
                                  // at-home
                                  $('#set-result-home .text-risk-score').text('Your Risk Score is '+ risk_score);
                                  $('#set-result-home').fadeIn(200);
                                }
                              });

                              if (response.Duplicate) {
                                  $("#dupe-span").html(response.Duplicate);
                              }
                              lead_id = response.lead_id;
                              //$('#risk-score-loading').css("display", "none");
                              //$("#set-final").css("display", "block");

                              seerForm('submit success');
                              data['insermsg'] = response.insertmsg;
                              data['badData']  = response.badData;
                              data['insert_data'] = response.insert_data;
                              risk_ajaxCallSalesforceProcess(data);
                          } else {
                              var error = '';
                              $('#risk-score-loading').css("display", "none");
                              $.each(response, function(key, value) {
                                  $("#" + key).css({'border' : '2px solid #F21300'});
                                  // PLACEHOLDER FIX FOR IE
                                  //$("#" + key).val($("#" + key).attr('placeholder'));
                                  error = error + '<p class="error_text">' + value + '</p>';
                              });
                              //$("#errorType").html("Request");
                              //$("#errorMessage").html(error);
                              //$('#errorModal').modal();

                              $('#ra-loader2').hide().empty();
                              $('#ra-lead-form').show();
                              console.log("There were some validation errors");
                          }

                      },
                      error: function(xhr, status, error) {
                        console.log(JSON.stringify(xhr));
                        console.log(status);
                        console.log(error);
                          console.log("There was an ajax error");
                          $('#ra-loader2').hide().empty();
                          $('#ra-lead-form').show();
                      }
                  });

              }

              function risk_ajaxCallSalesforceProcess(data){
                var url = "https://www.medicalguardian.com/forms/salesforceCall";
                //var url = "https://mg.oclocksupport.com/forms/salesforceCall";
                $.ajax({
                    url: url,
                    data: data,
                    type: 'post',
                    dataType: 'json',
                    success: function(response) {
                        //$("#form_submit_modal").modal('hide');
                        console.log(response);
                        if (response.success) {

                        } else {
                            console.log("There were some validation errors");
                        }

                    },
                    error: function(xhr, status, error) {
                        console.log("There was an ajax error");

                    }
                });

            }

            });
        </script>


    </body>
</html>
